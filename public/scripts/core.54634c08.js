String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var casinoApp=angular.module("CasinoApp",["angular-svg-round-progress","ngRoute"]);angular.module("CasinoApp").config(["$routeProvider",function(a){a.when("/registration",{templateUrl:"partials/registration.html",controller:"RegistrationCtrl",controllerAs:"regCtrl"}).otherwise({redirectTo:"/registration"})}]),angular.module("CasinoApp").service("ShellService",[function(){var a=10,b=[];this.title="",this.setCurrentValue=function(b){a=b},this.getCurrentValue=function(){return a},this.addError=function(a){b.push(a)},this.resetErrors=function(){b.length=0},this.leftButton=function(){console.log("Clicked Left Button")},this.rightButton=function(){console.log("Clicked Right Button")},this.errors=b}]),angular.module("CasinoApp").directive("equals",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){a.$watch(c.ngModel,function(){e()}),c.$observe("equals",function(a){e()});var e=function(){var a=d.$viewValue,b=c.equals;d.$setValidity("equals",!a||!b||a===b)}}}}}),angular.module("CasinoApp").directive("focusme",["$document","$timeout",function(a,b){return{scope:{focusme:"@"},link:function(a,c,d){d.$observe("focusme",function(a){"true"===a&&b(function(){c[0].focus()},0)})}}}]),angular.module("CasinoApp").directive("dateOfBirth",["$timeout",function(a){function b(b,c,d,e){e&&""!==c.val()&&a(function(){return e.$setViewValue(c.val())},0);var f=function(){return e.$setViewValue(c.val())},g=function(a){if(!a)return a;var b=function(a){var b=a.replace(/-/g," "),c=b.replace(/\s+/g," "),d=c.replace(/[^\d^\s]/g,""),e=d.replace(/([\d]{1,2}) ([\d]{1,2}) ([\d]{2})[\d]*[\s]*/g,"$1 - $2 - $3");if(-1===e.indexOf("-")){var e=d.replace(/([\d]{1,2}) ([\d]{1,2}) ([\d]{1,2})[\s]*/g,"$1 - $2 - $3");-1===e.indexOf("-")&&(e=d.replace(/([\d]{1,2}) ([\d]{1,2})[\s]+/g,"$1 - $2 - "),-1===e.indexOf("-")&&(e=d.replace(/([\d]{1,2}) ([\d]{2})[\s]*/g,"$1 - $2 - "),-1===e.indexOf("-")&&(e=d.replace(/([\d]{1,2})[\s]+/g,"$1 - "),-1===e.indexOf("-")&&(e=d.replace(/([\d]{2})[\s]*/g,"$1 - ")))))}var f=e;return f},c=b(a);return a!==c&&(e.$setViewValue(c),e.$render()),c};e.$formatters.push(function(a){return g(a)}),e.$parsers.push(function(a){return g(a)}),e.$validators.validateNumber=function(a,b){var d=!0,e=!0;if(a){var f=a.replace(/ /g,"").split("-");3===f.length?f.forEach(function(a){""===a&&(e=!1)}):e=!1}else e=!1;if(c.attr("required")&&a&&(d=d&&e),e){var f=a.replace(/ /g,"").split("-"),g="19"+f[0]+"-"+f[1]+"-"+f[2];isNaN(Date.parse(g))&&(d=d&&!1)}return d},c.on("keydown",function(a){if(8!=a.keyCode&&37!=a.keyCode)return b.$evalAsync(f);for(var d=c[0].selectionStart,g=c.val(),h=d-1;h>=0;h--)if(/^\d+$/.test(g.charAt(h))){d=h;break}var i=g.substring(0,d);e.$setViewValue(i),e.$render(),a.preventDefault()}),c.on("click",function(a){var b=c[0].selectionStart,d=c.val(),f=d.substring(0,b);e.$setViewValue(f),e.$render(),a.preventDefault()}),c.on("blur change",function(a){return b.$evalAsync(f)}),c.on("$destroy",function(){return c.off("blur keydown change click")})}return{require:"^ngModel",restrict:"A",link:b}}]),angular.module("CasinoApp").directive("phoneNumber",["$timeout",function(a){function b(b,c,d,e){options={prefix:"(0)",defaultCountry:"sv"},angular.forEach(options,function(a,b){var c;if(d.hasOwnProperty(b)&&angular.isDefined(d[b]))return c=d[b],options[b]=c}),e&&""!==c.val()&&a(function(){return e.$setViewValue(c.val())},0);var f=function(){return e.$setViewValue(c.val())},g=function(a){if(!a)return a;var b=a.replace(/(\(.*?\))/g,""),c=b.replace(/[^\d]/g,""),d=options.prefix+" "+c.replace(/(.{3})/g,"$1 ").trim();return a!==d&&(e.$setViewValue(d),e.$render()),d};e.$formatters.push(function(a){return g(a)}),e.$parsers.push(function(a){return g(a)}),e.$validators.internationalPhoneNumber=function(a,b){var d=!0;return c.attr("required")&&a&&(d=d&&a.length>options.prefix.length+1),d},c.on("blur keyup change",function(a){return b.$evalAsync(f)}),c.on("$destroy",function(){return c.off("blur keyup change")})}return{require:"^ngModel",restrict:"A",link:b}}]),angular.module("CasinoApp").directive("inputBox",function(){return{restrict:"E",scope:{id:"@",model:"=",type:"@",placeholder:"@",focus:"@",text:"@",minlength:"@",maxlength:"@",pattern:"@"},templateUrl:"partials/inputbox.html"}}),angular.module("CasinoApp").directive("errorWidget",function(){return{restrict:"E",scope:{errors:"="},templateUrl:"partials/errorwidget.html"}}),angular.module("CasinoApp").directive("progressWidget",function(){return{restrict:"E",scope:{errors:"=",current:"=",max:"=",showProgress:"="},templateUrl:"partials/progresswidget.html"}}),angular.module("CasinoApp").controller("ShellCtrl",["$window","$scope","ShellService",function(a,b,c){var d=this;this.showProgress=!0,this.current=1,this.max=1e3,this.errors=c.errors,this.title=function(){return c.title},this.liveChat=function(){alert("Clicked LiveChat")},this.leftButton=function(){c.leftButton()},this.rightButton=function(){c.rightButton()},b.$watch(function(a){return c.getCurrentValue()},function(a,b){d.current=a})}]),angular.module("CasinoApp").controller("RegistrationCtrl",["$scope","$http","$timeout","ShellService",function(a,b,c,d){var e=this;this.step=-1,this.buttonMsg=void 0,this.isInPassword=!0,this.isInPasswordConfirm=!1,this.user={email:void 0,password:void 0,confirmPassword:void 0,username:void 0,firstName:void 0,lastName:void 0,dateOfBirth:void 0,country:"sweden",city:void 0,postcode:void 0,address:void 0,phoneCountryCode:"+46",phoneNumber:" "};var f={"-1":{init:function(){},validation:function(){return!0}},0:{title:"Free Signup",points:0,init:function(){},btnName:"Sign Up!",validation:function(){return!0}},1:{title:"Free Signup 1/12",points:0,init:function(){},validation:function(){var a=!0;return void 0===e.user.email&&(d.addError("Oops! This is not a valid e-mail address!"),a=!1),a}},2:{title:"Free Signup 2/12",points:50,btnName:"Got It!",init:function(){},validation:function(){return!0}},3:{title:"Free Signup 3/12",points:100,init:function(){e.isInPassword=!0,e.isInPasswordConfirm=!1},validation:function(){var a=!0;return(void 0===e.user.password||void 0===e.user.confirmPassword||e.user.password!==e.user.confirmPassword)&&(d.addError("Oops! The passwords do not match!"),a=!1),a}},4:{title:"Free Signup 4/12",points:150,init:function(){},validation:function(){var a=!0;return void 0===e.user.username&&(d.addError("Oops! Can you think of another username?"),a=!1),a}},5:{title:"Free Signup 5/12",points:200,init:function(){},validation:function(){var a=!0;return void 0===e.user.firstName&&(d.addError("Oops! Are you sure that is your first name? Seems a bit short.."),a=!1),a}},6:{title:"Free Signup 6/12",points:300,init:function(){},validation:function(){var a=!0;return void 0===e.user.lastName&&(d.addError("Oops! Are you sure that is your last name? Seems a bit short.."),a=!1),a}},7:{title:"Free Signup 7/12",points:400,init:function(){},validation:function(){var a=!0;return void 0===e.user.dob&&(d.addError("Oops! There seems to be something wrong with that date of birth!"),a=!1),a}},8:{title:"Free Signup 8/12",points:500,btnName:"Yes!",init:function(){},validation:function(){return!0}},9:{title:"Free Signup 9/12",points:600,init:function(){},validation:function(){var a=!0;return void 0===e.user.postalCode&&(d.addError("Oops! There seems to be something wrong with that postal code!"),a=!1),a}},10:{title:"Free Signup 10/12",points:700,init:function(){if(void 0===e.user.city){var a="https://maps.googleapis.com/maps/api/geocode/json?components=postal_code:"+e.user.postalCode+"|country:"+e.user.country;b.get(a).then(function(a){if(a&&a.data&&a.data.results){var b=a.data.results;if(b.length>0){var c=b[0],d=c.address_components;d&&d.filter(function(a){-1!==a.types.indexOf("postal_town")&&(e.user.city=a.long_name)})}}})}},validation:function(){var a=!0;return void 0===e.user.city&&(d.addError("Oops! There seems to be something wrong with that!"),a=!1),a}},11:{title:"Free Signup 11/12",points:800,init:function(){},validation:function(){var a=!0;return void 0===e.user.address&&(d.addError("Oops! There seems to be something wrong with that address!"),a=!1),a}},12:{title:"Free Signup 12/12",points:900,init:function(){},validation:function(){var a=!0;return void 0===e.user.phoneCountryCode&&(d.addError("Oops! Please select a country code!"),a=!1),void 0===e.user.phoneNumber&&(d.addError("Oops! There seems to be something wrong with that phone number!"),a=!1),a}},13:{title:"Deposit",points:1e3,init:function(){},validation:function(){return!0}}};this.updateNavAndPoints=function(){d.title=f[e.step].title,d.setCurrentValue(f[e.step].points),e.buttonMsg=f[e.step].btnName,0!==e.step?d.leftButton=function(){e.previousStep()}:d.leftButton=void 0,13!==e.step&&$("#temp").focus(),c(function(){window.scrollTo(0,0),window.scrollTo(0,75)}),f[e.step].init()},this.nextStep=function(){var a=function(){d.resetErrors(),f[e.step].validation()?(e.step<13&&(e.step+=1),e.updateNavAndPoints()):window.scrollTo(0,0)};13!==e.step&&(3===e.step?e.user.password&&e.user.confirmPassword?a():e.user.password&&($("#temp").focus(),e.isInPassword=!1,e.isInPasswordConfirm=!0):a())},this.previousStep=function(){e.step>1&&(e.step-=1),e.updateNavAndPoints(),d.resetErrors()},this.submit=function(a){e.nextStep()},this.nextStep()}]),angular.module("CasinoApp").run(["$templateCache",function(a){"use strict";a.put("partials/errorwidget.html",'<div ng-show="errors.length > 0"><div class=error-container><div class=text-center><span class="red-clr glyphicon glyphicon-exclamation-sign fa-3x"></span></div><div><div class=panel-default><div class="red-clr panel-body text-center"><div ng-repeat="error in errors"><h4>{{error}}</h4></div><div><h4>Please try again!</h4></div></div></div></div></div></div>'),a.put("partials/inputbox.html","<div class=form-group ng-show=true><label for={{id}}>{{text}}</label><input ng-model=model type={{type}} class=form-control autocomplete=off autocapitalize=off autocorrect=off spellcheck id={{id}} placeholder={{placeholder}} focusme={{focus}} minlength={{minlength}} maxlength={{maxlength}} pattern={{pattern}} required></div>"),a.put("partials/progresswidget.html",'<div ng-hide="errors.length > 0" class=container-wrapper><div class="gray-clr text-center"><h4>Collect Points and Get Rewarded</h4></div><div class=progress-wrapper><div class=progress-r><div>{{current | number}} / {{max | number}}</div><div>POINTS</div></div><div class=container-fluid><div round-progress max=max current=current color=#45ccce bgcolor=#eaeaea semi=true rounded=true radius=90 stroke=7 clockwise=true responsive=false iterations=100 animation=easeInOutQuart></div></div></div></div>'),a.put("partials/registration.html",'<form name=newUserForm ng-submit=regCtrl.submit() novalidate><input class=fix autocomplete=off autocapitalize=off autocorrect=off spellcheck class=form-control id=temp><div class=form-group ng-show="regCtrl.step === 0"></div><input-box id=inputEmail ng-show="regCtrl.step === 1" focus="{{regCtrl.step === 1}}" placeholder=abc@example.com model=regCtrl.user.email type=email text="What is your email?"></input-box><div class=form-group ng-show="regCtrl.step === 2"><div class="row text-center"><span class="gray-clr fa fa-3x fa-arrow-up"></span></div><div class=row><div class=panel-default><div class="gray-clr panel-body">With almost everything you do at Casino X you collect Points. You can use your Points to get rewards or to level up thus accessing more valuable rewards. Finalise your registration to collect your first reward.</div></div></div></div><div class=form-group ng-show="regCtrl.step === 3"><label for=inputPassword>Write your password two times...</label><input type=password ng-model=regCtrl.user.password class=form-control autocomplete=off autocapitalize=off autocorrect=off spellcheck id=inputPassword placeholder=Password focusme="{{regCtrl.step === 3 && regCtrl.isInPassword}}" required><br><input type=password ng-model=regCtrl.user.confirmPassword class=form-control autocomplete=off autocapitalize=off autocorrect=off spellcheck id=inputConfirmPassword placeholder="Confirm Password" focusme="{{regCtrl.step === 3 && regCtrl.isInPasswordConfirm}}" equals={{regCtrl.user.password}} required></div><input-box id=inputUsername ng-show="regCtrl.step === 4" focus="{{regCtrl.step === 4}}" placeholder=Username model=regCtrl.user.username type=text text="Pick a username..." minlength=3></input-box><input-box id=inputFirstName ng-show="regCtrl.step === 5" focus="{{regCtrl.step === 5}}" placeholder="First Name" model=regCtrl.user.firstName type=text text="What\'s your first name?" minlength=3></input-box><input-box id=inputLastName ng-show="regCtrl.step === 6" focus="{{regCtrl.step === 6}}" placeholder="Last Name" model=regCtrl.user.lastName type=text text="What\'s your last name?" minlength=3></input-box><div class=form-group ng-show="regCtrl.step === 7"><label for=inputDoB>When were you born?</label><input type=tel date-of-birth ng-model=regCtrl.user.dob class=form-control autocomplete=off autocapitalize=off autocorrect=off spellcheck id=inputDoB placeholder="YY - MM - DD" focusme="{{regCtrl.step === 7}}" required></div><div ng-show="regCtrl.step === 8"><div class=form-group><label for=inputCountry>Do you live in Sweden?</label></div><div class=form-group><img class="img-responsive center-block" ng-src="images/sweden.png"></div></div><input-box id=inputPostalCode ng-show="regCtrl.step === 9" focus="{{regCtrl.step === 9}}" placeholder="Postal Code" model=regCtrl.user.postalCode type=tel text="What\'s your postal code?" maxlength=5 minlength=5 pattern=[0-9]*></input-box><input-box id=inputCity ng-show="regCtrl.step === 10" focus="{{regCtrl.step === 10}}" placeholder=City model=regCtrl.user.city type=text text="What city do you live in?" minlength=3></input-box><input-box id=inputAddress ng-show="regCtrl.step === 11" focus="{{regCtrl.step === 11}}" placeholder="Street name & number" model=regCtrl.user.address type=text text="Your street name & number?" minlength=3></input-box><div ng-show="regCtrl.step === 12"><div class=form-group><label for=inputPhoneCode>What\'s your phone number?</label></div><div class=form-group><div class="form-group col-xs-4"><select id=inputPhoneCode ng-model=regCtrl.user.phoneCountryCode class=form-control><option value=+46>+46</option></select></div><div class="form-group col-xs-8"><input type=tel class=form-control ng-model=regCtrl.user.phoneNumber class=form-control autocomplete=off autocapitalize=off autocorrect=off spellcheck focusme="{{regCtrl.step === 12}}" id=inputPhone required minlength=7 maxlength=15 phone-number prefix=(0) default-country=sv></div></div></div><div class=row ng-show="regCtrl.step === 13"><div class=panel-default><div class="gray-clr panel-body"><h3 class=text-center>Make your first deposit!</h3></div></div><div class=panel-body><div class=form-group><button type=submit ng-click=successCtrl.depositWithBonus() class="btn btn-danger btn-lg btn-block">Deposit with Bonus</button></div><div class=form-group><button type=submit ng-click=successCtrl.depositWithoutBonus() class="btn btn-danger btn-lg btn-block">Deposit without Bonus</button></div><div class=form-group><button type=submit ng-click=successCtrl.justRegister() class="btn btn-default btn-lg btn-block">Just Register For Now</button></div></div></div><div class=form-group ng-show="regCtrl.step !== 13"><button type=button class="btn btn-default btn-lg btn-block" disabled ng-show="regCtrl.step === 8">No</button> <button type=submit class="btn btn-danger btn-lg btn-block" focusme="{{regCtrl.step === 2 || regCtrl.step === 8 }}"><i ng-hide=regCtrl.buttonMsg class="fa fa-arrow-right"></i>{{regCtrl.buttonMsg}}</button></div><input type=submit index=-1 style="display:none"></form>')}]);